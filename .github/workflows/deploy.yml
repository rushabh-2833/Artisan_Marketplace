name: Deploy to Linode

on:
  push:
    branches:
      - main  # Replace with the branch you want to trigger deployment

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
      # Checkout the repository
      - name: Checkout Code
        uses: actions/checkout@v3

      # Deploy to Linode
      - name: Deploy to Linode Server
        uses: appleboy/ssh-action@v0.1.5
        with:
          host:  172.105.22.192           # Linode server's public IP
          username: root       # SSH username (e.g., yourusername or root)
          key: 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       # SSH private key
          port: 22                                   # Default SSH port
          script: |
            cd /var/www/html/Artisan_Marketplace
            git pull origin main
            chown -R www-data:www-data .
            chmod -R 755 .
            sudo systemctl reload nginx
